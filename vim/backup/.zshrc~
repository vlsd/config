# Path to your oh-my-zsh configuration.
ZSH=$HOME/.oh-my-zsh

# Set name of the theme to load.
# Look in ~/.oh-my-zsh/themes/
# Optionally, if you set this to "random", it'll load a random theme each
# time that oh-my-zsh is loaded.
ZSH_THEME="gnzh"

# Uncomment following line if you want red dots to be displayed while waiting for completion
COMPLETION_WAITING_DOTS="true"

# Export path before loading plugins. This solves issues with gnu-utils
export PATH=$HOME/bin:/opt/local/bin/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/X11/bin:/Applications/Mathematica.app/Contents/MacOS/

# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
plugins=(lol git osx macports python gnu-utils screen wakeonlan)

source $ZSH/oh-my-zsh.sh


# Add the MacPorts manual pages to the manpath
export MANPATH=/opt/local/share/man:$MANPATH

# this sends the name of the current command to screen
preexec () {
    if [[ "$TERM" == "screen" ]]; then
        local CMD=${1[(wr)^(*=*|sudo|-*)]}
        echo -ne "\ek$CMD\e\\"
    fi
}

# function wol {
#     wakeonlan -i $1 00:30:67:22:4d:47
# }

# default editor is vim, but command line key bindings are emacs
EDITOR="/opt/local/bin/vim"
bindkey -e

# custom aliases
alias vless='/opt/local/share/vim/vim73/macros/less.sh'
alias math='/opt/local/bin/rlwrap -c /Applications/Mathematica.app/Contents/MacOS/MathKernel'
alias Math='/Applications/Mathematica.app/Contents/MacOS/Mathematica'

# add syntax color and piping to less
export LESSOPEN="| /opt/local/bin/src-hilite-lesspipe.sh %s"
export LESS=' -R '
export CLICOLOR_FORCE="true"

# force color in grep
alias grep="grep --color=always"

# color listing
eval $(gdircolors)
zstyle ':completion' list-colors "${(s.:.)LS_COLORS}"

# colorize man pages
man() {
    env \
        LESS_TERMCAP_mb=$(printf "\e[1;31m") \
        LESS_TERMCAP_md=$(printf "\e[1;31m") \
        LESS_TERMCAP_me=$(printf "\e[0m") \
        LESS_TERMCAP_se=$(printf "\e[0m") \
        LESS_TERMCAP_so=$(printf "\e[1;44;33m") \
        LESS_TERMCAP_ue=$(printf "\e[0m") \
        LESS_TERMCAP_us=$(printf "\e[1;32m") \
            man "$@"
}

# turn caching completion responses from apps
zstyle ':completion:*' use-cache on
zstyle ':completion:*' cache-path ~/.zsh/cache

